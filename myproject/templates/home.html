{% extends 'base.html' %}
<!-- 
<nav class="navbar navbar-expand-lg navbar-dark bg-dark">
    <div class="container">
      <a class="navbar-brand" href="{% url 'home' %}">Django Boards</a>
    </div>
  </nav>
   -->
{% block content %}

<!-- form to create a new task -->
<form method="post">
    {% csrf_token %}
    
    {{ new_task_form.as_p }}

    <button type="submit" class="btn btn-outline-primary">Add</button>
</form>


<div class="row_of_unique_buttons">
<!-- button to unhide all tasks -->
<form method="post">
    {% csrf_token %}
    {{ unhide_all_tasks_button.as_p }}
    <button type="submit" name="unhide_all" class="btn btn-outline-secondary">Unhide All</button>
</form>

<!-- button to hide all tasks -->
<form method="post">
    {% csrf_token %}
    {{ hide_all_tasks_button.as_p }}
    <button type="submit" name="hide_all" class="btn btn-outline-secondary">Hide All</button>
</form>


<!-- button to show next 5 tasks -->
<form method="post">
    {% csrf_token %}
    {{ show_next_five_tasks_button.as_p }}
    <button type="submit" name="show_next_five_tasks_button" class="btn btn-outline-secondary">Show Next Five Tasks</button>
</form>

<!-- end row_of_unique_buttons -->
</div>


<table class="table">
    <thead class="thead-dark">
        <!-- first row of table -->
        <tr>
            <th>Task</th>
            <th>Next review date</th>
            <th>Hide</th>
            <th>Hours to push</th>
            <th>Push hours</th>
            <th>Days to push</th>
            <th>Push days</th>
            <th>Complete</th>
        </tr>
    </thead>
    <tbody>
        <!-- django - renders each task that was returned by the home() function in views.py  -->
        <!-- note - names are needed on input and button elements for the views.py home() function to
            properly process incoming POST requests -->
        {% for task in tasks %}
        <tr>
            <td class="align-middle">
                <!-- displays task text -->
                {{ task.task_text }}
            </td>
            <td class="align-middle">
                <!-- displays next update date -->
                {{ task.next_update_date }}
            </td>

            <!-- form for hide task button -->
            <form method="post">
                {% csrf_token %}
                {{ hide_task_form.as_p }}
                <td>
                    <!-- this input element is needed to identify which task -->
                    <input value="{{task.id}}" name="task_id" type="hidden">
                    <button type="submit" name="hide" class="btn btn-outline-secondary">Hide</button>
                </td>
            </form>

            <form method="post">
                {% csrf_token %}
                {{ push_task_form_hours.as_p }}
                <td class="align-middle">
                    <!-- this input element is needed to identify which task -->
                    <input value="{{task.id}}" name="task_id" type="hidden">
                    <!-- entry box for how many days to push, min="1" forces positive integers
                        note - min="1" only forces positive ints on the HTML side
                        it's not perfect -->
                    <input type="number" min="1" name="hours_to_push">
                </td>
                <td>
                    <button type="submit" name="push_hours" class="btn btn-outline-secondary">Push</button>
                </td>
            </form>

            <!-- form for day delta entry and button -->
            <form method="post">
                {% csrf_token %}
                {{ push_task_form_days.as_p }}
                <td class="align-middle">
                    <!-- this input element is needed to identify which task -->
                    <input value="{{task.id}}" name="task_id" type="hidden">
                    <!-- entry box for how many days to push, min="1" forces positive integers
                        note - min="1" only forces positive ints on the HTML side
                        it's not perfect -->
                    <input type="number" min="1" name="days_to_push">
                </td>
                <td>
                    <button type="submit" name="push_days" class="btn btn-outline-secondary">Push</button>
                </td>
            </form>


            <td class="align-middle">

                <form method="post">
                    <!-- form to complete task -->
                    {% csrf_token %}
                    {{ complete_task_button.as_p }}
                    <input value="{{task.id}}" name="task_id" type="hidden">
                    <button type="complete_task_button" name="complete"
                        class="btn btn-outline-secondary">Complete</button>
                </form>


            </td>
        </tr>
        {% endfor %}
    </tbody>

</table>

<!-- endblock content -->
{% endblock %}