{% extends 'base.html' %}
<!-- 
<nav class="navbar navbar-expand-lg navbar-dark bg-dark">
    <div class="container">
      <a class="navbar-brand" href="{% url 'home' %}">Django Boards</a>
    </div>
  </nav>
   -->
{% block content %}

<h1>ToDoApp v0.1</h1>

<!-- form to create a new task -->
<form method="post">
    {% csrf_token %}
    {{ new_task_form.as_p }}
    <button type="submit" class="btn btn-outline-primary">Add</button>
</form>

<br>

<!-- button to unhide all tasks -->
<form method="post">
    {% csrf_token %}
    {{ unhide_all_tasks_button.as_p }}
        <button type="submit" name="unhide" class="btn btn-outline-secondary">Unhide All</button>
</form>

<br>


<table class="table">

    <thead class="thead-dark">
        <tr>
            <th>Task</th>
            <th>Next review date</th>
            <th>Hide</th>
            <th>How many days to ignore?</th>
            <th>Push</th>
            <th>Complete</th>
        </tr>
    </thead>
    <tbody>
        {% for task in tasks %}
        <tr>
            <td class="align-middle">
                {{ task.task_text }}
            </td>
            <td class="align-middle">
                <!-- {% load tz %} -->
                <!-- {% localtime on %} -->
                {{ task.next_update_date }}
                <!-- {% endlocaltime %} -->
            </td>
            <!-- form for hide task button -->

            <form method="post">
                {% csrf_token %}
                {{ hide_task_form.as_p }}
                <td>
                    <!-- this input element is needed to identify which task -->
                    <input value="{{task.id}}" name="task_id" type="hidden">
                    <button type="submit" name="hide" class="btn btn-outline-secondary">Hide</button>
                </td>
            </form>

            <!-- form for day delta entry and button -->
            <form method="post">
                {% csrf_token %}
                {{ push_task_form.as_p }}
                <td class="align-middle">
                    <!-- this input element is needed to identify which task -->
                    <input value="{{task.id}}" name="task_id" type="hidden">
                    <input type="number" min="1" name="days_to_push">
                </td>
                <td>
                    <button type="submit" name="push" class="btn btn-outline-secondary">Push</button>
                </td>
            </form>


            <td class="align-middle">

                <form method="post">

                    {% csrf_token %}
                    {{ complete_task_button.as_p }}
                    <input value="{{task.id}}" name="task_id" type="hidden">
                    <button type="complete_task_button" name="complete"
                        class="btn btn-outline-secondary">Complete</button>
                </form>


            </td>
        </tr>
        {% endfor %}
    </tbody>

</table>

<!-- endblock content -->
{% endblock %}